:ruby
	SOLVERS = {
		"government" => "Riigile",
		"municipal" => "Kohalikele omavalitsustele",
		"community" => "Kogukondadele"
	}

	CATEGORIES = {
		"population" => "Sündimus",
		"national-migration" => "Eesti-sisene ränne",
		"international-migration" => "Piiriülene ränne",
		"work" => "Tööhõive"
	}

%h2.subheading Ettepanekud
%p.paragraph
	Selleks, et lahendusideedest saaksid konkreetsemad ettepanekud, mis oleksid ka mõjusad, kutsusime kokku teemaseminarid. Ettepanekutele aitasid ekspertsisu juurde tuua valdkondade asjatundjad, nende seas nii kodanikuaktivistid kui avalikus sektoris töötajad. Kokku neljal seminaril valisid osalejad lahendusideedest välja olulisemad ning sõnastasid täpsemad ettepanekud. Allolevas tabelis on iga ettepaneku juurde märgitud, kuhu see edasi liigub ja kui asjakohane, kes ettepaneku otsustajateni viimise eest hoolt kannab.

#solutions
	- CATEGORIES.keys.each_with_index do |category, index|
		%input(id="#{category}-solutions-toggle"
			name="solutions"
			type="radio"
			hidden){checked: index == 0}

	%nav
		- CATEGORIES.each do |category, title|
			%label(for="#{category}-solutions-toggle")= title

	- solutions_by_category.each do |category, solutions_by_solver|
		.solutions-of(id="#{category}-solutions")
			- solutions_by_solver.each do |solver, solutions|
				.solutions-for
					%h3
						%span.category= CATEGORIES[category] + ": "
						= SOLVERS[solver]

					%ol.solutions
						- solutions.each do |solution|
							%li.solution
								- if solution.problem
									%input(id="#{solution.id}-solution" type="checkbox" hidden)

								- klass = solution.problem ? "with-details" : ""
								%label(for="#{solution.id}-solution"){class: klass}
									- if solution.problem
										%i.chevron

									%p= solution.text

								- if solution.problem
									.solution-details
										%p= solution.problem

										- unless solution.links.empty?
											%h4 Ettepanek edasi suunatud:

											%ul.solution-links
												- solution.links.each do |name, url|
													%li
														- if url
															%a(href=url)= name
														- else
															= name

%h2.subheading Edasised sammud
%p.paragraph
	Ettepanekud on asjaomastele riigiasutustele edasi antud ja kui ka kõik nendest ei ole kohe jõustamiseks toetust leidnud, jätkub arutelu kogukondades väljapakutud lahenduste üle paljude valdkondade tulevikustrateegiaid läbi rääkides. Ettepanekud puudutavad enam kui kümmet valdkonda,  kõige enam tööpoliitikat, regionaalpoliitikat, hariduspoliitikat ning laste- ja perepoliitikat. 

- solutions = solutions_by_category.values.map(&:values).flatten
- links = solutions.map(&:links).flatten(1).reject(&:nil?)
- links_by_name = links.group_by {|name, url| name }
- sorted_links = links_by_name.sort_by {|name, links| -links.size }

%ol#next-solution-steps
	- sorted_links[0..4].each do |name, links|
		%li
			- ratio = links.size.to_f / sorted_links[0][1].size.to_f
			- size = 3 + 3 * ratio
			- style = "width: #{size}rem; line-height: #{size}rem"
			%span.link-count
				%i{:style => style}= links.size
			= " #{name}"
